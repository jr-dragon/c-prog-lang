# 第 2 章：資料型態、運算元與表達式

變數與常數是程式中兩種基本的資料對象。宣告陳述式說明變數的資料型態與名稱，也可以同時指定該變數的初始值；運算元則是用於指定要對資料進行的操作；_表達式（Expression）_ 則是用於把變數與常數組合起來的操作。

資料類型決定該資料可取值的集合以及可以對該對象執行的操作，本章將會詳細講述這些內容。

## 2.1 變數名稱

對變數與符號常數的命名存在一些限制條件，我們在[第 1 章](./ch-01-introduction.md)刻意忽略了這個部份的說明。

變數名是由字母及數字組成的序列，但首字元必須是字母。底線 `_` 會被視為字母的一種，通常用於命名較長的變數以提高其可讀性。大寫與小寫會被視為不同的字母，所以 `int x` 與 `int X` 會被視為兩個不同的變數，在傳統上變數名盡量使用小寫、符號常量則全部使用大寫以區分。

:::warn
雖然 C 語言允許宣告及使用以 `_` 開頭的變數，但是在 C 語言的演進過中程往往會將 `_` 開頭的變數保留給後續功能使用，所以實際在開發時應當避免。
:::

類似於 `if`、`else`、`int`、`float` 等 C 語言的關鍵字是保留給語言本身使用的，不能將其作為變數名稱，且所有的關鍵字都必須是小寫。

變數名稱應該要盡量能夠從字面上表達其用途，以免產生混淆。區域變數一般會習慣使用較短的變數名稱或是約定俗成的縮寫，而全域變數則會選用較長的名稱。

## 2.2 資料型態與大小

在 C 語言中的基本資料型態如下：

- `char`：字元型別，僅佔用 1 byte
- `int`：整數型別，反應了當前硬體或作業系統中整數的最自然長度
- `float`：單精度浮點型別
- `double`：倍精度浮點型別

### 2.2.1 整數型別

對於整數型別，可以在前面加上 `short` 或 `long` 修飾符：

```c
short int sh;
long int counter;
long long int timestamp;
```

在上述的宣告中關鍵字 `int` 可以省略寫成 `short sh`、`long counter` 或 `long long timestamp`。

讀者應該有注意到，我們並沒有直接說明 `int`、`short int`、`long int` 及 `long long int` 的資料大小，這是因為在 C 語言設計的時候考慮到不同硬體會有不同的需求所以對此並沒有明確規範。

:::info
對於現代 C 語言開發，建議讀者在使用整數型別應該優先使用標準函式庫 `stdint.h` 中的型別定義以避免歧義，在 `stdint.h` 中會定義一系列有固定大小的資料型態，它的格式應該是 `intN_t`，其中 `N` 可以代換為固定大小的值，例如 `int8_t` 代表是佔用 8 bits 的整數。
:::

順帶一提，字元型別 `char` 可以被視為一種整數型別。

### 2.2.2 浮點數型別

浮點數可以想像成「帶有小數點的數值」，在 C 語言中共有三個可以代表浮點數的型別：
- `float`
- `double`
- `long double`

與 `int` 類型一樣，它們並沒有規定明確的資料大小，只規定了 `float` 必定小於等於 `double`、`double` 必定小於等於 `long double`。

在絕大部份情況下，`float` 通常指的是 32 bits 浮點數、`double` 則是 64 bits 浮點數，而 `long double` 相對罕見得多。

:::warn
浮點數是藉由犧牲了精確度來換取表達更大的值的手段，因此對於需要精確數值操作的領域（如金融或商務領域）不冒貿然使用浮點數表示。
:::

### 2.2.3 類型限制符

類型限定符 `signed` 與 `unsigned` 可以用於整數型別，分別代表「有負號」與「無負號」，它們可以被放在整數型別之前。

舉例來說，`signed char` 取值範圍會落在 -128 到 127 之間（在絕大多數硬體上的行為），而 `unsigned char` 的取值範圍則是落在 0 到 255 之間。

對於 `int`、`short int`、`long int` 與 `long long int`，它們會是有負號整數，所以通常會把 `signed` 省略下來；若是特別需要無負號整數，就需要加上 `unsigned` 限制符。

`float` 與 `double` 在定義上已經保證它們可同時支援有負號與無負號，因此無法在上面使用類型限制符。

### 2.2.4 limits.h 與 float.h

如果要精確得知當前平台上的各資料型態上下限值，可以使用 `limits.h` 與 `float.h` 標頭檔中的定義。

```c
#include <stdio.h>
#include <limits.h>
#include <float.h>

int main() {
    printf("maximum value of int: %d\n", INT_MAX);
    printf("minimum value of int: %d\n", INT_MIN);

    printf("maximum value of float: %f\n", FLT_MAX);
    printf("minimum value of float: %f\n", FLT_MIN);
}
```

這些值在不同的硬體、作業系統或編譯器中可能會有差異，在實際開發之前最好都先確認這些值以避免歧異。
